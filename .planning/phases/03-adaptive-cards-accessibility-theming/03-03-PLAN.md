---
phase: 03-adaptive-cards-accessibility-theming
plan: 03
type: execute
wave: 2
depends_on: [03-02]
files_modified:
  - client/src/components/ChatShell.tsx
  - client/src/components/chat.css
  - client/src/App.tsx
autonomous: true
requirements: [UI-01]

must_haves:
  truths:
    - "At 360px viewport width: single-column layout, transcript fills full width, input bar at bottom — no horizontal overflow"
    - "At 768px viewport width: two-column grid appears — chat on left, metadata placeholder on right"
    - "At 1280px viewport width: split-pane visible, right pane clearly reserved with a placeholder text"
    - "Right pane slot is a DOM element present on desktop (hidden on mobile) — ready for Phase 4 metadata drawer content"
  artifacts:
    - path: "client/src/components/ChatShell.tsx"
      provides: "Responsive layout shell with CSS Grid — left chat column + right metadata drawer slot"
      contains: "metadataPane"
    - path: "client/src/components/chat.css"
      provides: "Responsive grid layout with @media breakpoints, single-column mobile, split-pane desktop"
      contains: "@media (min-width: 768px)"
  key_links:
    - from: "client/src/components/ChatShell.tsx"
      to: "client/src/components/chat.css"
      via: "CSS classes .appLayout and .metadataPane"
      pattern: "appLayout|metadataPane"
---

<objective>
Implement responsive CSS Grid layout: single-column on mobile (≤767px), split-pane on desktop (≥768px) with the right pane reserved as a placeholder for the Phase 4 metadata drawer. Verified at 360px, 768px, and 1280px.

Purpose: UI-01 (responsive split-pane layout with 360px/768px/1280px verification).
Output: Refactored ChatShell with grid wrapper, metadata drawer slot DOM element, responsive CSS.
</objective>

<execution_context>
@/Users/zycroft/.claude/get-shit-done/workflows/execute-plan.md
@/Users/zycroft/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-adaptive-cards-accessibility-theming/03-CONTEXT.md
@.planning/phases/03-adaptive-cards-accessibility-theming/03-RESEARCH.md
@.planning/phases/02-text-chat-end-to-end/02-04-SUMMARY.md
@.planning/phases/03-adaptive-cards-accessibility-theming/03-02-SUMMARY.md
@client/src/components/ChatShell.tsx
@client/src/components/chat.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement responsive split-pane layout in ChatShell + chat.css</name>
  <files>
    client/src/components/ChatShell.tsx
    client/src/components/chat.css
  </files>
  <action>
    **Modify `client/src/components/ChatShell.tsx`:**

    Wrap the existing content in an `.appLayout` grid container. The structure should be:

    ```tsx
    <div className="appLayout">
      {/* Left column: full chat UI */}
      <div className="chatPane">
        <div className="chatShell">
          {error && <div className="globalError">{error}</div>}
          <ThemeToggle theme={theme} onToggle={toggle} />
          <TranscriptView messages={messages} isLoading={isLoading} />
          <ChatInput onSend={sendMessage} disabled={isLoading} />
        </div>
      </div>
      {/* Right column: Phase 4 metadata drawer slot — empty in Phase 3 */}
      <aside className="metadataPane" aria-label="Metadata panel">
        <p className="metadataPanePlaceholder">Activity log (Phase 4)</p>
      </aside>
    </div>
    ```

    The `<aside>` must be present in the DOM on all viewports but hidden on mobile via CSS.

    **Modify `client/src/components/chat.css`:**

    Add responsive layout rules. Insert at the TOP of the file (after the box-sizing reset, before the body rule):

    ```css
    /* ─────────────────────────────────────────────────────────────────────────────
       App Layout — Responsive Split-Pane (UI-01)
       Mobile: single column; Desktop ≥768px: chat + metadata drawer
       ───────────────────────────────────────────────────────────────────────────── */

    .appLayout {
      display: grid;
      grid-template-columns: 1fr;
      height: 100vh;
      overflow: hidden;
    }

    .chatPane {
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      min-width: 0; /* prevent grid blowout */
    }

    .metadataPane {
      display: none; /* hidden on mobile */
      border-left: 1px solid var(--color-border);
      background: var(--color-surface);
      overflow-y: auto;
    }

    .metadataPanePlaceholder {
      color: var(--color-text-muted);
      font-size: var(--font-size-sm);
      text-align: center;
      padding: var(--space-4);
      margin: 0;
      font-style: italic;
    }

    @media (min-width: 768px) {
      .appLayout {
        grid-template-columns: 1fr 280px;
      }

      .metadataPane {
        display: block;
      }
    }
    ```

    Update `.chatShell` — remove `height: 100vh` (it's now on `.chatPane`) and add `height: 100%` so it fills its parent:
    ```css
    .chatShell {
      display: flex;
      flex-direction: column;
      height: 100%;
      background: var(--color-bg);
      overflow: hidden;
      position: relative; /* keeps ThemeToggle anchor from 03-02 */
    }
    ```

    Run `cd client && npx tsc --noEmit` — must exit 0.
  </action>
  <verify>
    cd client && npx tsc --noEmit
    grep "metadataPane" client/src/components/ChatShell.tsx
    grep "metadataPane" client/src/components/chat.css
    grep "@media (min-width: 768px)" client/src/components/chat.css
  </verify>
  <done>
    ChatShell.tsx renders .appLayout wrapping .chatPane + aside.metadataPane.
    chat.css has .appLayout grid, .metadataPane hidden on mobile, @media ≥768px shows right pane at 280px.
    TypeScript compiles clean.
    At 360px (single-column): no horizontal overflow, input bar accessible.
    At 768px (split): right pane visible at 280px.
    At 1280px (split): layout stable and correct.
  </done>
</task>

</tasks>

<verification>
- cd client && npx tsc --noEmit exits 0
- npm test exits 0 (no regressions)
- grep "appLayout" client/src/components/ChatShell.tsx finds a match
- grep "@media (min-width: 768px)" client/src/components/chat.css finds a match
- aside.metadataPane is in the DOM at all viewport widths (hidden via CSS display:none on mobile)
</verification>

<success_criteria>
- UI-01: Responsive layout verified at 360px (single-column, no overflow), 768px (split-pane appears), 1280px (split-pane stable)
- Right metadata pane slot is a structural DOM element ready for Phase 4 content — no layout rework required in Phase 4
- ChatShell still renders correctly: error bar, theme toggle, transcript, input
</success_criteria>

<output>
After completion, create `.planning/phases/03-adaptive-cards-accessibility-theming/03-03-SUMMARY.md`
</output>
