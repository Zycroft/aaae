---
milestone: v1.0
audited: 2026-02-20
status: gaps_found
scores:
  requirements: "37/37 (8 satisfied, 29 partial, 0 unsatisfied)"
  phases: "1/3 fully verified (Phase 2), 2/3 unverified (Phases 1 & 3)"
  integration: "4/4 E2E flows verified, all cross-phase wiring confirmed"
  flows: "4/4 complete"
gaps:
  requirements: []
  unverified_phases:
    - id: "01-scaffold-schema-server-foundation"
      status: "unverified"
      issue: "Missing VERIFICATION.md — 15 requirements are partial (SUMMARY listed, REQUIREMENTS [x], no formal verification)"
      evidence: "All 4 plan SUMMARY.md files list requirements-completed; Phase 2 VERIFICATION.md implicitly confirms Phase 1 outputs work (normalizer tests pass, schema validation active, store used)"
      requirements_affected:
        - INFRA-01
        - INFRA-02
        - INFRA-03
        - INFRA-04
        - INFRA-05
        - INFRA-06
        - SCHEMA-01
        - SCHEMA-02
        - SCHEMA-03
        - SCHEMA-04
        - SERV-01
        - SERV-02
        - SERV-05
        - SERV-09
        - SERV-10
    - id: "03-adaptive-cards-accessibility-theming"
      status: "unverified"
      issue: "Missing VERIFICATION.md — 14 requirements are partial. UAT.md exists with 8/8 pass but is not a formal VERIFICATION.md"
      evidence: "03-UAT.md: 8 tests, 8 passed, 0 issues. All 5 plan SUMMARY.md files list requirements-completed."
      requirements_affected:
        - SERV-04
        - SERV-07
        - SERV-08
        - SERV-12
        - UI-01
        - UI-06
        - UI-07
        - UI-08
        - UI-10
        - UI-13
        - UI-14
        - UI-15
        - UI-16
        - UI-17
  integration: []
  flows: []
tech_debt:
  - phase: "01-scaffold-schema-server-foundation"
    items:
      - "MSAL OBO token flow is stubbed (by design for v1) — stub fails-closed; AUTH-01 deferred to v2"
      - "npm ls zod shows ELSPROBLEMS due to SDK version pin mismatch (3.25.75 vs 3.25.76); physically single Zod instance confirmed — cosmetic only"
      - "SERV-05 shows 'Pending' in REQUIREMENTS.md traceability table but [x] in requirement text and listed in 01-03-SUMMARY — traceability table stale"
  - phase: "03-adaptive-cards-accessibility-theming"
    items:
      - "Metadata drawer (aside.metadataPane) is a placeholder with 'Activity log (Phase 4)' text — UI-11 and UI-12 deferred to Phase 4"
      - "ESLint missing @react-eslint plugin for JSX type inference — no runtime impact per integration check"
---

# Milestone Audit: v1.0 — Agentic Copilot Chat App

**Audited:** 2026-02-20
**Status:** ⚠ gaps_found
**Phases in scope:** 3 (01, 02, 03)
**Phase 4 status:** Not started — out of scope for this audit

## Milestone Definition of Done

From ROADMAP.md — milestone covers phases 1-3:
1. Monorepo wired, shared schemas, server foundation (`POST /api/chat/start`)
2. Full text chat proxy chain working end-to-end
3. Adaptive Cards rendered and interactive; full WCAG 2.2 AA; dark/light theme; responsive 360–1280px

## Requirements Coverage

### 3-Source Cross-Reference

| Requirement | Phase | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|-------------|-------|-----------------|---------------------|-----------------|--------------|
| INFRA-01 | 1 | missing | listed (01-01) | `[x]` | **partial** |
| INFRA-02 | 1 | missing | listed (01-01) | `[x]` | **partial** |
| INFRA-03 | 1 | missing | listed (01-01) | `[x]` | **partial** |
| INFRA-04 | 1 | missing | listed (01-01) | `[x]` | **partial** |
| INFRA-05 | 1 | missing | listed (01-01) | `[x]` | **partial** |
| INFRA-06 | 1 | missing | listed (01-01) | `[x]` | **partial** |
| SCHEMA-01 | 1 | missing | listed (01-02) | `[x]` | **partial** |
| SCHEMA-02 | 1 | missing | listed (01-02) | `[x]` | **partial** |
| SCHEMA-03 | 1 | missing | listed (01-02) | `[x]` | **partial** |
| SCHEMA-04 | 1 | missing | listed (01-02) | `[x]` | **partial** |
| SERV-01 | 1 | missing | listed (01-03) | `[x]` | **partial** |
| SERV-02 | 1 | missing | listed (01-04) | `[x]` | **partial** |
| SERV-05 | 1 | missing | listed (01-03) | `[x]` | **partial** |
| SERV-09 | 1 | missing | listed (01-03) | `[x]` | **partial** |
| SERV-10 | 1 | missing | listed (01-03) | `[x]` | **partial** |
| SERV-03 | 2 | **passed** | listed (02-02) | `[x]` | **satisfied** |
| SERV-06 | 2 | **passed** | listed (02-01) | `[x]` | **satisfied** |
| SERV-11 | 2 | **passed** | listed (02-01) | `[x]` | **satisfied** |
| UI-02 | 2 | **passed** | listed (02-04) | `[x]` | **satisfied** |
| UI-03 | 2 | **passed** | listed (02-04) | `[x]` | **satisfied** |
| UI-04 | 2 | **passed** | listed (02-04) | `[x]` | **satisfied** |
| UI-05 | 2 | **passed** | listed (02-04) | `[x]` | **satisfied** |
| UI-09 | 2 | **passed** | listed (02-03) | `[x]` | **satisfied** |
| SERV-04 | 3 | missing (UAT ✓) | listed (03-01) | `[x]` | **partial** |
| SERV-07 | 3 | missing (UAT ✓) | listed (03-01) | `[x]` | **partial** |
| SERV-08 | 3 | missing (UAT ✓) | listed (03-01) | `[x]` | **partial** |
| SERV-12 | 3 | missing (UAT ✓) | listed (03-01) | `[x]` | **partial** |
| UI-01 | 3 | missing (UAT ✓) | listed (03-03) | `[x]` | **partial** |
| UI-06 | 3 | missing (UAT ✓) | listed (03-04) | `[x]` | **partial** |
| UI-07 | 3 | missing (UAT ✓) | listed (03-04) | `[x]` | **partial** |
| UI-08 | 3 | missing (UAT ✓) | listed (03-04) | `[x]` | **partial** |
| UI-10 | 3 | missing (UAT ✓) | listed (03-04) | `[x]` | **partial** |
| UI-13 | 3 | missing (UAT ✓) | listed (03-02) | `[x]` | **partial** |
| UI-14 | 3 | missing (UAT ✓) | listed (03-02) | `[x]` | **partial** |
| UI-15 | 3 | missing (UAT ✓) | listed (03-02) | `[x]` | **partial** |
| UI-16 | 3 | missing (UAT ✓) | listed (03-05) | `[x]` | **partial** |
| UI-17 | 3 | missing (UAT ✓) | listed (03-05) | `[x]` | **partial** |

**Out of scope (Phase 4 — not yet executed):**
INFRA-07, UI-11, UI-12, DOCS-01, DOCS-02, DOCS-03

**Orphaned requirements:** 0 — all 37 in-scope requirements appear in SUMMARY frontmatter.

**Unsatisfied requirements:** 0 — FAIL gate not triggered.

### Summary Counts

| Status | Count | Phase(s) |
|--------|-------|---------|
| satisfied | 8 | Phase 2 |
| partial | 29 | Phases 1 & 3 |
| unsatisfied | 0 | — |
| orphaned | 0 | — |

## Phase Verification Status

| Phase | VERIFICATION.md | UAT.md | Status |
|-------|-----------------|--------|--------|
| 01-scaffold-schema-server-foundation | **MISSING** | None | ⚠ Unverified phase (blocker) |
| 02-text-chat-end-to-end | PASS (5/5 criteria) | N/A | ✓ Verified |
| 03-adaptive-cards-accessibility-theming | **MISSING** | 8/8 pass | ⚠ Unverified phase (blocker) |

### Phase 01 — Unverified

No VERIFICATION.md. All 4 plan SUMMARY.md files have requirements-completed frontmatter. The scaffold is proven functional through Phase 2's VERIFICATION.md (normalizer runs, schemas validate, server starts). However, Phase 1's own success criteria were never formally verified:
- Criterion 4: `POST /api/chat/start` returns `{ conversationId }` and rejects without auth header (not explicitly checked)
- Criterion 5: `grep -r "COPILOT" client/` returns no matches (not checked for Phase 1 baseline)

### Phase 02 — Verified ✓

VERIFICATION.md present, verdict PASS. All 5 success criteria met, all 8 requirements complete, 14 Vitest tests passing, TypeScript clean.

### Phase 03 — UAT Passed, Formal Verification Missing

No VERIFICATION.md. UAT.md exists (generated by gsd:verify-work) with 8/8 tests passing, 0 issues:
- Theme toggle + persistence ✓
- System preference detection ✓
- Desktop split-pane ✓
- Mobile single-column ✓
- Card action allowlist (403) ✓
- Adaptive Card renders and submits ✓
- Focus-visible rings + ARIA live region ✓

Phase 5 success criteria coverage by UAT:
1. Card renders, Submit fires once, card disabled → ✓ (UAT test 7)
2. Disallowed action returns 403 → ✓ (UAT test 6)
3. Layout at 360/768/1280px → ✓ (UAT tests 4-5)
4. Dark/light theme persists; prefers-reduced-motion respected → ✓ (UAT tests 1-3)
5. Keyboard nav + ARIA live region → ✓ (UAT test 8)

All 5 success criteria are covered by UAT, just not in a formal VERIFICATION.md.

## Integration Check

**Status: PASS** — All cross-phase wiring verified.

| Check | Status |
|-------|--------|
| Shared schemas consumed by server + client | ✓ |
| Single Zod instance (no duplicate hoisting) | ✓ |
| `/api/chat/start` called by `startConversation()` | ✓ |
| `/api/chat/send` called by `sendMessage()` via useChatApi | ✓ |
| `/api/chat/card-action` called by `sendCardAction()` via cardAction() | ✓ |
| `normalizeActivities()` used in both /send and /card-action | ✓ |
| `useChatApi` centralizes start + send + cardAction (UI-09) | ✓ |
| TranscriptView → MessageBubble → AdaptiveCardMessage callback chain | ✓ |
| ChatShell wires cardAction from useChatApi into TranscriptView | ✓ |
| `conversationStore.get()` used in both /send and /card-action | ✓ |
| allowlist validator called before Copilot call in /card-action | ✓ |
| Auth middleware guards all /api routes | ✓ |
| CORS restricted to client origin only | ✓ |

## E2E Flows

| Flow | Status |
|------|--------|
| Text Chat: load → start → type → send → optimistic → skeleton → bot bubble | ✓ Complete |
| Card Submit: bot card activity → render → submit → allowlist → disabled → response | ✓ Complete |
| Theme Persistence: toggle → localStorage → reload → same theme | ✓ Complete |
| Responsive: desktop split-pane ≥768px / mobile single column | ✓ Complete |

## Tech Debt (Non-Blocking)

### Phase 1
- **MSAL OBO stubs** — intentional v1 design; full implementation deferred to AUTH-01/v2
- **Zod ELSPROBLEMS** — cosmetic only; single physical instance confirmed
- **SERV-05 traceability stale** — traceability table shows "Pending" but requirement text and SUMMARY show complete

### Phase 3
- **Metadata drawer placeholder** — `aside.metadataPane` renders "Activity log (Phase 4)" text; UI-11 and UI-12 are Phase 4 work
- **ESLint JSX plugin** — non-blocking, no runtime impact

---
*Generated: 2026-02-20*
*Integration check: PASS (cross-phase wiring complete, all E2E flows verified)*
