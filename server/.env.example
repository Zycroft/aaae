# --- LLM Provider (Phase 23+) ---
# Which LLM backend to use. Allowed values: copilot (default) | openai
LLM_PROVIDER=copilot

# Required only when LLM_PROVIDER=openai
# Your OpenAI API key — from https://platform.openai.com/api-keys
# NEVER commit real secrets — this file is for documentation only
OPENAI_API_KEY=

# OpenAI model to use (optional, defaults to gpt-4o-mini)
OPENAI_MODEL=gpt-4o-mini

# --- Copilot Studio Connection ---
# Your Power Platform environment ID — from Power Platform Admin Center > Environments > select env > copy Environment ID
COPILOT_ENVIRONMENT_ID=your-environment-id-here

# The schema name of your Copilot Studio agent — from Copilot Studio > your agent > Settings > Advanced > Schema name
COPILOT_AGENT_SCHEMA_NAME=your-agent-schema-name-here

# Your Azure App Registration tenant ID — from Azure Portal > Azure Active Directory > Overview > Tenant ID
COPILOT_TENANT_ID=your-tenant-id-here

# Your Azure App Registration client ID — from Azure Portal > App Registrations > your app > Overview > Application (client) ID
COPILOT_APP_ID=your-app-client-id-here

# Your Azure App Registration client secret — from Azure Portal > App Registrations > your app > Certificates & Secrets
# NEVER commit real secrets — this file is for documentation only
COPILOT_CLIENT_SECRET=your-client-secret-here

# --- Auth Stub (Phase 1) ---
# Set to "false" to bypass auth check for local dev. Default: "true" (fail-closed — never open by accident).
# WARNING: Never set AUTH_REQUIRED=false in production.
AUTH_REQUIRED=true

# Stub bearer token for local dev when AUTH_REQUIRED=false. Leave blank in production.
COPILOT_STUB_TOKEN=

# --- Server Config ---
# The port the Express server listens on
PORT=3001

# The exact client origin for CORS — no trailing slash (must match Vite dev server URL exactly)
CORS_ORIGIN=http://localhost:5173

# --- Azure AD / Entra External ID (Phase 6+) ---
# Your Entra External ID tenant name (e.g. "contoso" from contoso.ciamlogin.com)
AZURE_TENANT_NAME=your-tenant-name-here

# Azure App Registration client ID for the SERVER application
# From Azure Portal > App Registrations > your server app > Overview > Application (client) ID
AZURE_CLIENT_ID=your-server-app-client-id-here

# Comma-separated list of allowed tenant IDs (tid claims)
# Only tokens from these tenants will be accepted. Leave blank to block all.
ALLOWED_TENANT_IDS=tenant-id-1,tenant-id-2

# --- Redis (Phase 12+) ---
# Azure Cache for Redis connection URL. Must use rediss:// (TLS) scheme.
# When not set, server uses in-memory store (suitable for local dev).
# Example: rediss://:your-access-key@your-cache.redis.cache.windows.net:6380
REDIS_URL=

# Conversation TTL in seconds (default: 86400 = 24 hours)
REDIS_TTL=86400

# Redis command timeout in milliseconds (default: 5000 = 5 seconds)
REDIS_TIMEOUT=5000
